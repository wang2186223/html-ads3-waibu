# 统计表每小时自动更新设置指南

## 功能说明
统计表将每小时自动更新一次，生成格式如下：
```
时间,域名来源（不记录后缀）,书籍名称,累计章节（含chapter的url）,累计ip数量（去重）
12月25日,re.cankalp.com,my-rejected-mate-regrets,45,23
12月25日,re.cankalp.com,runaway-heiress-reborn-crushing-ceo-ex,32,18
```

## 在Google Apps Script中设置每小时触发器

### 步骤1：打开触发器管理
1. 访问 Google Apps Script: https://script.google.com/
2. 打开您的项目（analytics-script.js所在的项目）
3. 点击左侧菜单栏的 "触发器" (⏰ 图标)

### 步骤2：创建新触发器
1. 点击 "添加触发器" 按钮
2. 配置触发器设置：
   - **要执行的函数**: `hourlyStatisticsUpdate`
   - **事件源**: 时间驱动
   - **时间驱动触发器类型**: 小时计时器
   - **小时间隔**: 每小时
   - **时间**: 随机 (推荐) 或选择具体时间

### 步骤3：保存触发器
1. 点击 "保存"
2. 授权应用程序权限（如果需要）

## 手动测试
您可以随时手动运行统计更新：
1. 在Google Apps Script编辑器中
2. 选择函数 `manualStatisticsUpdate`
3. 点击 "运行" 按钮

## 统计表特点
- **表名**: 📈统计汇总表
- **位置**: 在Google Sheets的第二个标签页
- **更新规则**: 
  - 今日数据：每小时覆盖更新
  - 历史数据：保持不变
  - 更新时间戳：显示在表格底部

## 数据来源
- 从当日数据表(`详细-YYYY-MM-DD`)中提取
- 按域名+书籍名称分组统计
- 自动去重IP地址
- 只计算包含`chapter-`的URL作为章节访问

## 注意事项
1. 触发器将在每小时自动运行
2. 如果当日数据表不存在，统计将为空
3. 统计表会自动创建，无需手动创建
4. 每次更新会在表格底部显示最新的更新时间